library(ggplot2)
head(mpg)
qplot(displ, year, data= mpg)
qplot(year, displ, data= mpg)
qplot(cyl, displ, data= mpg)
g = ggplot(mpg, aes(cyl, displ))
summary(g)
p <- g + geom_point()
print(p)
print(p)
g + geom_point()
g + geom_line()
g + geom_point()
g + geom_point() + geom_smooth()
g + geom_point() + geom_smooth(method = "lm")
g + geom_point() + geom_smooth(method = "lm") + facet_grid(.~drv)
g + geom_point() + geom_smooth(method = "lm") + facet_grid(drv.~)
g + geom_point() + geom_smooth(method = "lm") + facet_grid(.~drv)
g + geom_point() + geom_smooth(method = "lm") + facet_grid(drv . ~)
g + geom_point() + geom_smooth(method = "lm") + facet_grid(drv ~.)
g + geom_point() + geom_smooth(method = "lm") + facet_grid(.~drv)
g + geom_point() + geom_smooth(method = "lm") + facet_grid(.~drv) + theme_bw()
g + geom_point(color = "green", size = 4) + geom_smooth(method = "lm") + facet_grid(.~drv) + theme_bw()
g + geom_point(color = "green", size = 4, alpha = 1/2) + geom_smooth(method = "lm") + facet_grid(.~drv) + theme_bw()
g + geom_point(color = year, size = 4, alpha = 1/2) + geom_smooth(method = "lm") + facet_grid(.~drv) + theme_bw()
g + geom_point(color = drv, size = 4, alpha = 1/2) + geom_smooth(method = "lm") + facet_grid(.~drv) + theme_bw()
g + geom_point(color = year, size = 4, alpha = 1/2) + geom_smooth(method = "lm") + facet_grid(.~drv) + theme_bw()
g + geom_point(color = mpg$year, size = 4, alpha = 1/2) + geom_smooth(method = "lm") + facet_grid(.~drv) + theme_bw()
g + geom_point(color = "blue", size = 4, alpha = 1/2) + geom_smooth(method = "lm") + facet_grid(.~drv) + theme_bw()
g + geom_point(color = "blue", size = 4, alpha = 1/2) + geom_smooth(method = "lm") + facet_grid(.~drv) + theme_bw() + legend()
g + geom_point(color = "blue", size = 4, alpha = 1/2)
g + geom_point(color = year, size = 4, alpha = 1/2, data = mpg)
is.factor(mpg$year)
mpg$year <- factor(mpg$year)
is.factor(mpg$year)
g + geom_point(color = year, size = 4, alpha = 1/2, data = mpg)
g + geom_point(color = year, size = 4, alpha = 1/2)
g + geom_point(aes(color = year), size = 4, alpha = 1/2)
is.factor(drv)
is.factor(mpg$drv)
is.factor(mpg$hwy)
g + geom_point(aes(color = hwy), size = 4, alpha = 1/2)
g + geom_point(aes(color = hwy), size = 4, alpha = 1/2) + theme_classic()
g + geom_point(aes(color = hwy), size = 4, alpha = 1/2) + theme_minimal()
g + geom_point(aes(color = hwy), size = 4, alpha = 1/2) + theme_light()
g + geom_point(aes(color = hwy), size = 4, alpha = 1/2) + theme_light() + geom_smooth(size = 2, se = F, method = "lm")
g + geom_point(aes(color = hwy), size = 4, alpha = 1/2) + theme_light() + geom_smooth(size = 2, se = F, method = "lm", color = "black")
g + geom_point(aes(color = hwy), size = 4, alpha = 1/2) + theme_light() + geom_smooth(size = 2, se = F, method = "lm", color = cyl)
g + geom_point(aes(color = hwy), size = 4, alpha = 1/2) + theme_light() + geom_smooth(size = 2, se = F, method = "lm", color = "black")
testdat <- data.frame(x = 1:100, y = rnorm(100))
testdat[50,2] <- 100
plot(testdata$x, testdata$y, type = "l", ylim = c(-3, 3))
plot(testdat$x, testdat$y, type = "l", ylim = c(-3, 3))
ggplot(testdat, aes(x, y))
g = ggplot(testdat, aes(x, y))
g + geom_line()
g + geom_line() + ylim(-3, 3)
g + geom_line() + coord_cartesian(ylim = c(-1, 3))
g + geom_line() + coord_cartesian(ylim = c(-3, 3))
g + geom_area() + coord_cartesian(ylim = c(-3, 3))
g + geom_area() + coord_cartesian(ylim = c(0, 3))
g + geom_area(color = "red", alpha = 1/2) + coord_cartesian(ylim = c(0, 3))
g + geom_density() + coord_cartesian(ylim = c(-3, 3))
g + geom_density() + coord_cartesian(ylim = c(0, 3))
g + geom_density() + ylim = c(0, 3)
g + geom_area() + ylim = c(0, 3)
g + geom_area(color = "red", alpha = 1/2) + coord_cartesian(ylim = c(0, 3))
g + geom_area(color = "red", alpha = 1/2, fill = "red") + coord_cartesian(ylim = c(0, 3))
g + geom_area(color = "red", fill = "red") + coord_cartesian(ylim = c(0, 3))
g + geom_area(fill = "red") + coord_cartesian(ylim = c(0, 3))
g + geom_area(fill = "red", alpha = 0.3) + coord_cartesian(ylim = c(0, 3))
g + geom_area(fill = "red", alpha = 0.5) + coord_cartesian(ylim = c(0, 3))
g + geom_area(fill = "red", alpha = 0.5) + coord_cartesian(ylim = c(0, 3)) theme_light()
g + geom_area(fill = "red", alpha = 0.5) + coord_cartesian(ylim = c(0, 3)) + theme_light()
pad = "C:/Users/jeroen.demaeyer/Google Drive/TGVelo/Studies/Motor testbank/R/experimenten/loadcell/"
# ------------------------------------------------------------------------------------
mdz <- read.table(paste(pad, "stand6_zonder_kabel.txt", sep = ""), header = T)
mdm <- read.table(paste(pad, "stand6.txt", sep = ""), header = T)
mdm2 <- read.table(paste(pad, "stand6_met_kabel.txt", sep = ""), header = T)
library(dplyr)
mdz <- mutate(mdz, volts = Koppel / 0.36 / 9.81)
mdm <- mutate(mdm, volts = Koppel / 0.36 / 9.81)
mdm2 <- mutate(mdm2, volts = Koppel / 0.36 / 9.81)
plot(mdm$Tijd, mdm$volts)
plot(mdm2$Tijd, mdm2$volts)
plot(mdz$Tijd, mdz$volts)
mdz <- mutate(mdz, volts = (Koppel / 0.36 / 9.81 + 0.21)/3.92)
mdm <- mutate(mdm, volts = (Koppel / 0.36 / 9.81 + 0.21)/3.92)
mdm2 <- mutate(mdm2, volts = (Koppel / 0.36 / 9.81 + 0.21)/3.92)
plot(mdm$Tijd, mdm$volts)
plot(mdm2$Tijd, mdm2$volts)
plot(mdz$Tijd, mdz$volts)
max(mdm$volts)
x <- seq(0, 0.5, step = 0.001)
x <- seq(0, 0.5, by = 0.001)
Fn <- 0.11*0.19*7800*x*(0.1 + x/2)/(0.85 + x)
plot(x, Fn)
Gn <- 0.11*0.19*7800*x*(0.1 + x/2)/(0.17 + x)
plot(x, Fn)
plot(x, Gn)
approx(Gn, x, xout = 40)
x <- seq(0, 1, by = 0.001)
Gn <- 0.11*0.19*7800*x*(0.1 + x/2)/(0.17 + x)
approx(Gn, x, xout = 50)
approx(Gn, x, xout = 60)
ggplot(filter(md, Koppel > 20), aes(Snelheid, Koppel, col = Spanning)) + geom_point()
library(ggplot2)
library(dplyr)
ggplot(filter(md, Koppel > 20), aes(Snelheid, Koppel, col = Spanning)) + geom_point()
source('C:/Users/jeroen.demaeyer/Google Drive/TGVelo/Studies/Motor testbank/R/function_ma.R')
source('C:/Users/jeroen.demaeyer/Google Drive/TGVelo/Studies/Motor testbank/R/verwerk_data.R')
ggplot(filter(md, Koppel > 20), aes(Snelheid, Koppel, col = Spanning)) + geom_point()
if(!require(installr)) {
install.packages("installr"); require(installr)} #load / install+load installr
updateR()
setwd("~/R/eChecker/tractionCapacity")
source("fun.R")
df1 <- readcsv("calvoor1_05_04.csv", compressed = T)
calBefore <- calibrate(df1)
df2 <- readcsv("calna1_05_04.csv", compressed = T)
calAfter <- calibrate(df2)
library(data.table)
test <- fread('data/test1_05_04.csv', header = TRUE)
test <- fread('data/calna1_05_04.csv', header = TRUE, dec=",")
head(test)
head(test$Pa3, 50)
test[,26]
test[1,26]
test[2,26]
colnames(test)[26]
test[4222,]
test[4422,]
setwd("~/R/eChecker/tractionCapacity")
source("fun.R")
df1 <- readcsv("calvoor1_05_04.csv", compressed = T)
calBefore <- calibrate(df1)
df2 <- readcsv("calna1_05_04.csv", compressed = T)
calAfter <- calibrate(df2)
test <- readcsv("test1_05_04.csv")
plot(test$ta, test$Pa3)
plot(test$ta, test$Pa1)
sel <- subset(test, ta < 200)
plot(sel$ta, sel$Pa1)
plot(sel$ta, c(0, diff(sel$Pa1)))
library("zoo")
sel$Pmean <- rollmean(sel$Pa1, 51)
?rollmean
sel$Pmean <- rollmean(sel$Pa1, 51, fill = c(NA, NA, NA))
test <- readcsv("test1_05_04.csv", compressed = T)
setwd("~/R/eChecker/tractionCapacity")
source("fun.R")
test <- readcsv("test1_05_04.csv", compressed = T)
sel <- subset(test, ta < 200)
plot(sel$ta, c(0, diff(sel$Pa1)))
library("zoo")
sel$Pmean <- rollmean(sel$Pa1, 51, fill = c(NA, NA, NA))
plot(sel$ta, c(0, diff(sel$Pmean)))
calBefore$Pmean
df1 <- readcsv("calvoor1_05_04.csv", compressed = T)
calBefore <- calibrate(df1)
df2 <- readcsv("calna1_05_04.csv", compressed = T)
calAfter <- calibrate(df2)
calBefore$Pmean
calAfter$Pmean
plot(sel$ta, calBefore$Pmean - sel$Pa1)
sel <- subset(test, ta >50)
plot(sel$ta, sel$Pa1)
seltail <- tail(test, 500)
plot(seltail$ta, seltail$Pa1)
seltail <- tail(test, 2000)
plot(seltail$ta, seltail$Pa1)
seltail <- tail(test, 10000)
plot(seltail$ta, seltail$Pa1)
sel <- subset(test, ta >50, ta < 5230)
plot(sel$ta, sel$Pa1)
sel <- subset(test, ta > 50 & ta < 5230)
plot(sel$ta, sel$Pa1)
plot(sel$ta, calBefore$Pmean - sel$Pa1)
mean(sel$v)
sel$Pmotor <- calBefore$Pmean - sel$Pa1
cumsum(c(1,2,3,4))
head(sel$ta)
head(diff(sel$ta), 100)
mean(diff(sel$ta))
sd(diff(sel$ta))
200*0.01
2/3600
sel$Emotor <- cumsum(sel$Pmotor * c(0.01, diff(sel$ta)))
plot(sel$Emotor)
tail(sel$Emotor)
tail(sel$Emotor,1)
Etot <- tail(sel$Emotor,1)
Etot / 3600
setwd("~/R/eChecker/tractionCapacity")
source("fun.R")
df1 <- readcsv("calvoor1_05_04.csv", compressed = T)
calBefore <- calibrate(df1)
df2 <- readcsv("calna1_05_04.csv", compressed = T)
calAfter <- calibrate(df2)
Pcal = (calAfter$Pmean + calBefore$Pmean) / 2
test <- readcsv("test1_05_04.csv", compressed = T)
selHead <- head(test, 10000)
plot(selHead$ta, selHead$Pa1)
selTail <- tail(test, 10000)
plot(selTail$ta, seltail$Pa1)
plot(selTail$ta, selTail$Pa1)
sel <- subset(test, ta > 40 & ta < 5230)
plot(sel$ta, sel$Pa1)
sel$Pmotor <- Pcal - sel$Pa1
sel$Emotor <- cumsum(sel$Pmotor * c(0.01, diff(sel$ta)))
Etot <- tail(sel$Emotor,1)
Ewh <- Etot / 3600
plot(sel$ta, Pcal - sel$Pa1)
